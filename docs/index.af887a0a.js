/*! signal-v-noise v1.0.0 | (c) 2022 benjmnrsh@gmail.com | ISC License | https://github.com/bnjmnrsh-projs/signal-v-noise */

var e=["home","arts","automobiles","books","business","climate","dining","fashion","food","health","insider","magazine","movies","nyregion","obituaries","opinion","politics","realestate","science","sports","style","sundayreview","technology","theater","t-magazine","travel","upshot","us","world"];function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n(e){if(Array.isArray(e))return t(e)}function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}function a(e){return n(e)||o(e)||i(e)||r()}var l=function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML};function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){c(e,t,n[t])}))}return e}addEventListener("click",(function(e){"section"in e.target.dataset&&(document.querySelector("#app").setAttribute("data-section",e.target.dataset.section),e.target.classList.add("active"))}));var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".observable",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"loaded",o={root:document.querySelector("body"),rootMargin:"0px",threshold:1};e=s({},o,e);var r=document.querySelectorAll(t);if(r.length){var i=function(e){e.forEach((function(e){e.isIntersecting&&e.target.classList.add(n)}))},a=new IntersectionObserver(i,e);r.forEach((function(e){return a.observe(e)}))}else console.warn("No observerable elements named",t)},d=function(t){var n,o,r,i=document.querySelector("#articles"),a=document.querySelector("#loader");a.style.opacity=1,o=window.location.hash.replace("#",""),r=document.querySelector("nav.noise"),n&&r.querySelectorAll(".pill").forEach((function(e){e.classList.remove("active"),e.classList.contains(o)&&e.classList.add("active")})),i.innerHTML=t.top_stories.results.map((function(t){var n,o,r,i,a,c,s,u,d,h,v,f,m=e.indexOf(l(t.section))>=0;if(!m&&"admin"===t.section)return"";if(!t.abstract)return"";var y='<li>\n                                    <article class="news-item '.concat(l(t.section),'">\n                                        <header>');return"multimedia"in t&&null!==t.multimedia&&t.multimedia.length>=3&&(y+='<a href="'.concat(l(null==t?void 0:t.short_url),'" title="').concat(l(t.title),'">\n                                                <img class="loading-bg"\n                                                scrset="').concat(l(null===(n=t.multimedia[0])||void 0===n?void 0:n.url)," ").concat(l(null===(o=null==t?void 0:t.multimedia[0])||void 0===o?void 0:o.width),"w,\n                                                    ").concat(l(null===(r=t.multimedia[1])||void 0===r?void 0:r.url)," ").concat(l(null===(i=null==t?void 0:t.multimedia[1])||void 0===i?void 0:i.width),"w,\n                                                    ").concat(l(null===(a=t.multimedia[2])||void 0===a?void 0:a.url)," ").concat(l(null===(c=null==t?void 0:t.multimedia[2])||void 0===c?void 0:c.width),"w,\n                                                    ").concat(l(null===(s=t.multimedia[3])||void 0===s?void 0:s.url)," ").concat(l(null===(u=null==t?void 0:t.multimedia[3])||void 0===u?void 0:u.width),'w"\n                                                src="').concat(l(null===(d=t.multimedia[1])||void 0===d?void 0:d.url),'"\n                                                 height="').concat(l(null===(h=t.multimedia[1])||void 0===h?void 0:h.height),'"\n                                                 width="').concat(l(null===(v=null==t?void 0:t.multimedia[1])||void 0===v?void 0:v.width),'"\n                                                alt="').concat(l(null===(f=null==t?void 0:t.multimedia[1])||void 0===f?void 0:f.copyright),'" loading="lazy" role="presentation"/>\n                                            </a>')),y+='</header>\n                                        <section class="news-content">\n                                            <header>\n                                                <h3 class="hyphens"><a href="'.concat(l(t.short_url),'">').concat(t.title,'</a></h3>\n                                                  <p class="details">'),m?y+='<a class="pill '.concat(l(t.section),'" href="https://www.nytimes.com/section/').concat(l(t.section),'">'):t.section&&(y+='<span class="pill '.concat(l(t.section),'">')),y+="".concat(l(t.section)," ").concat(m?"</a>":"</span>","\n                                                    ").concat((null==t?void 0:t.byline)?'<span class="byline">':"","\n                                                    ").concat((null==t?void 0:t.byline)?l(null==t?void 0:t.byline):"","\n                                                    ").concat((null==t?void 0:t.byline)?"</span>":"",'\n                                                </p>\n                                            </header>\n                                            <div class="abstract">'),t.abstract&&(y+='<p class="hyphens">'.concat(l(null==t?void 0:t.abstract),'\n                                        <a href="').concat(l(t.short_url),'" title="').concat(l(t.title),'" class="read-more">[...more]</a>\n                                      </p>')),y+="</div>\n                                        </section>\n                                    </article>\n                                </li>"})).join(""),a.style.opacity=0,u({root:document.querySelector("#newsfeed-wrap"),threshold:.25},".news-item")};function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function f(e,t){return t.get?t.get.call(e):t.value}function m(e,t){return f(e,v(e,t,"get"))}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t,n){y(e,t),t.set(e,n)}function w(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function g(e,t,n){return w(e,v(e,t,"set"),n),n}function b(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function S(e,t){y(e,t),t.add(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function L(e,t,n){return E(e,t),n}var A=new WeakMap,O=new WeakMap,q=new WeakMap,T=new WeakSet,_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pocket";if(h(this,e),S(this,T),p(this,A,{writable:!0,value:void 0}),p(this,O,{writable:!0,value:void 0}),p(this,q,{writable:!0,value:void 0}),g(this,O,o?window.localStorage:window.sessionStorage),!t)throw new Error('Satchel: a "key" is required.');if("string"!=typeof t)throw new Error('Satchel: "key" must be a string.');if(!b(this,T,N).call(this,n))throw new Error("Satchel: {cargo} must be an object.");if("boolean"!=typeof o)throw new Error('Satchel: "local" must be a boolean.');if("string"!=typeof r)throw new Error('Satchel: "pocket" must be a string.');g(this,A,"".concat(e.stcl,".").concat(r,".").concat(t)),g(this,q,{data:void 0,expiry:null}),n=s({},m(this,q),n),this.set(n)}var t,n,o;return t=e,n=[{key:"age",value:function(){var e=JSON.parse(m(this,O).getItem(m(this,A)));return e?{age:Date.now()-e._creation,creation:e._creation,expiry:e.expiry?e.expiry:null,fresh:this.isFresh()}:null}},{key:"bin",value:function(){var t=m(this,O).getItem(m(this,A));return t?(m(this,O).removeItem(m(this,A)),L(e,e,j).call(e,{key:m(this,A),oldValue:t,storageArea:L(e,e,x).call(e,m(this,O)),action:"bin"}),!0):null}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=m(this,O).getItem(m(this,A));return t?!!(this.isFresh()&&!e||e)&&JSON.parse(t):null}},{key:"set",value:function(t){var n=t.data,o=t.expiry,r=JSON.parse(m(this,O).getItem(m(this,A)));if(n=(null==r?void 0:r.data)&&!n?r.data:n,o=(null==r?void 0:r.expiry)&&!o?r.expiry:o,n&&"string"!=typeof n&&"number"!=typeof n&&!b(this,T,N).call(this,n))throw new Error("Satchel.set({data}): must be either null or a number, string or object.");if("number"!=typeof o&&null!==o)throw new Error('Satchel.set({expiry}): "expiry" must be null or a number.');if(n&&b(this,T,N).call(this,n))try{JSON.parse(JSON.stringify(n))}catch(e){throw new Error("Satchel.set({data}): ".concat(e))}var i=this.get(!0),a={};return a.data=n||null,a.expiry=o||null,a._creation=(null==i?void 0:i._creation)||Date.now(),m(this,O).setItem(m(this,A),JSON.stringify(a)),L(e,e,j).call(e,{key:m(this,A),newValue:JSON.stringify(a),oldValue:i?JSON.stringify(i):null,storageArea:L(e,e,x).call(e,m(this,O)),action:"set"}),this}},{key:"isFresh",value:function(){var e=JSON.parse(m(this,O).getItem(m(this,A)));return e?!(null==e?void 0:e.expiry)||e.expiry-Date.now()>0:null}},{key:"getKey",value:function(){return m(this,A)}}],o=[{key:"stcl",get:function(){return this._stcl?this._stcl:"stcl"},set:function(e){if("string"!=typeof e)throw new Error("Satchel.stcl must be a string.");this._stcl=e}},{key:"getSatchel",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pocket";if(!t)throw new Error('Satchel.getSatchel(key): a "key" is required.');if("string"!=typeof t)throw new Error('Satchel.getSatchel(key): "key" must be a string.');if("boolean"!=typeof n)throw new Error('Satchel.getSatchel(key, local): "local" must be a boolean.');if("string"!=typeof o)throw new Error('Satchel.getSatchel(key, local, pocket): "pocket" must be an string.');var r="".concat(e.stcl,".").concat(o,".").concat(t),i=n?window.localStorage:window.sessionStorage,a=JSON.parse(i.getItem(r));return a&&0!==a.length?new e(t,a,n,o):null}}],n&&k(t.prototype,n),o&&k(t,o),e}();
/* ! @preserve @bnjmnrsh/satchel v0.2.4 | (c) 2022 bnjmnrsh | ISC | https://github.com/bnjmnrsh/satchel */function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=s({key:null,newValue:null,oldValue:null,storageArea:null,url:window.location.href,action:null},e);var t=new CustomEvent("Satchel",{bubbles:!0,cancelable:!0,detail:e});return document.dispatchEvent(t)}function x(e){return e===window.localStorage?"LocalStorage":"SessionStorage"}function N(e){return e&&"object"==typeof e&&e.constructor===Object}c(_,"_stcl",void 0);var I=function(e){var t,n;return'\n<div id="ohnos">\n  <h3><span aria-hidden="true">⥀.⥀ <br/></span>Oh Nooos!</h3>\n  <p class="sr-only">There has been a crittical error:</p>\n    <div>\n<pre>\n'.concat(e.stack||"","\n").concat(e.type||"","\n").concat("".concat(e.statusText||""," ").concat(e.status||""),"\n").concat(429===(null===(t=e.top_stories)||void 0===t?void 0:t.status)?"".concat(e.top_stories.status," too many requests"):e.top_stories.status,"\n").concat((null===(n=e.top_stories)||void 0===n?void 0:n.error)||"","\n").concat(e.top_stories.error_message?" Route not found: ".concat(e.top_stories.error_message.split("/").pop().replace(".json","")):"","\n</pre>\n    </div>\n</div>")},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",t=document.querySelector("#loader");if(t.style.opacity=1,navigator.onLine){var n;if(document.body.classList.add("loading"),null==(n=_.getSatchel(e,!0,"svn"))?void 0:n.get())return document.body.classList.remove("loading"),d(n.get().data),void document.body.querySelector("#newsfeed-wrap").scrollTo(0,0);n||(n=new Promise((function(n,o){var r;fetch("https://signal-v-noise-worker.bnjmnrsh.workers.dev?section="+e).then((function(e){if(document.body.classList.remove("loading"),r=e.json(),e.ok&&200===e.status)return r;throw e})).then((function(t){if("OK"!==t.top_stories.status)throw t;return d(t),new _(e,{data:t,expiry:Date.now()+12e4},!0,"svn"),document.body.querySelector("#newsfeed-wrap").scrollTo(0,0),t})).catch((function(e){t.style.opacity=0;var n=document.querySelector("#articles");console.error(e),n&&(n.innerHTML=I(e))}))})))}},J=function(){var e=window.location.hash.replace("#",""),t=document.querySelector("#app").getAttribute("data-section");e=e||"home",!t&&e&&(t=e,document.querySelector("#app").setAttribute("data-section",e)),"null"===e||"head"===e?(window.removeEventListener("hashchange",J),window.location.hash=t,setTimeout((function(){return window.addEventListener("hashchange",J)}),1)):M(e)};window.addEventListener("hashchange",J);var D,H=function(){var e={selector:"body",className:"toast",prepend:!1},t=function(t){var n=0,o={};o.settings=s({},t,e),o.target=document.querySelector(o.settings.selector),o.className=o.settings.className;var r=function(){return(n++).toString()};return o.create=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(this.target&&e){s=s||r();var u=document.createElement("div");return u.setAttribute("role","alert"),u.setAttribute("data-toast",s),(t=u.classList).add.apply(t,[this.className].concat(a(c))),n&&setTimeout((function(){u.remove()}),n),i?(u.innerHTML="".concat(e,' <button class="toast-close" arial-lable="close">&#x2715</button>'),u.addEventListener("click",(function(e){e.target.matches(".toast-close")&&(u.remove(),u.removeEventListener("click",close))}))):u.innerHTML="".concat(e),l?o.target.prepend(u):o.target.append(u),setTimeout((function(){return u.innerHTML}),1),s}},o.destroy=function(e){if(e){var t=document.querySelector('[data-toast="'.concat(e,'"]'));t&&t.remove()}},o};return t}(),P=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&e.forEach((function(e){t?(e.setAttribute("data-href",e.href),e.removeAttribute("href","href-disabled"),e.setAttribute("aria-disabled",!0)):(e.setAttribute("href",e.dataset.href),e.removeAttribute("aria-disabled"),e.removeAttribute("data-href"))}))},C=document.querySelector("#app");!function(){var e=navigator.onLine?"online":"offline";document.body.setAttribute("data-network",e);var t=new H,n="",o=Date.now().toString();window.addEventListener("offline",(function(e){var r=document.querySelectorAll(".noise .pill");console.log(r),console.warn("Network unavailable"),o=Date.now(),P(r),document.body.setAttribute("data-network","offline"),n=t.create("Sorry, you are currently off line",0,!1,!0,["offline-notice"])})),window.addEventListener("online",(function(){var e=document.querySelectorAll(".noise .pill");console.log(e),console.warn("Network available"),document.body.setAttribute("data-network","online"),P(e,!1),Date.now()-o>3e4&&J(),t.destroy(n)}))}(),D=e,C.querySelector("nav").innerHTML="<ul>"+D.map((function(e){return'<li><a href="#'.concat(e,'" class="pill ').concat(e,'" data-section="').concat(e,'">').concat(e,"</a></li>")})).join("")+"</ul>",J(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:125,n=document.querySelector(e),o=document.querySelector("#stt"),r=function(e){(e.scrollY||e.scrollTop)>t?(document.body.classList.add("scrolled"),o.classList.add("-is-revealed")):(document.body.classList.remove("scrolled"),o.classList.remove("-is-revealed"))};window.addEventListener("scroll",(function(e){return r(window)})),n.addEventListener("scroll",(function(e){return r(n)})),o.addEventListener("click",(function(e){document.scrollingElement.scrollTo(0,0),n.scrollTo(0,0)}))}("#newsfeed-wrap");
//# sourceMappingURL=index.af887a0a.js.map
