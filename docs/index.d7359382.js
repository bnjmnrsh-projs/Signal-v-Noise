/*! signal-v-noise v2022.11.02 | (c) 2022 benjmnrsh | ISC License | https://github.com/bnjmnrsh-projs/signal-v-noise */

var t=["home","arts","automobiles","books","business","climate","dining","fashion","food","health","insider","magazine","movies","nyregion","obituaries","opinion","politics","realestate","science","sports","style","sundayreview","technology","theater","t-magazine","travel","upshot","us","world"];function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function n(t){if(Array.isArray(t))return e(t)}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}function a(t){return n(t)||o(t)||i(t)||r()}var l=function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML};var c=function(){var t=window.location.hash.replace("#",""),e=document.querySelector("nav.noise").querySelectorAll(".pill");console.log("navActiveLink"),e.forEach((function(e){e.classList.contains(t)?e.classList.add("active"):e.classList.remove("active")}))};function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){s(t,e,n[e])}))}return t}addEventListener("click",(function(t){"section"in t.target.dataset&&void 0!==t.target.dataset.section&&c()}));var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".observable",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"loaded",o={root:document.querySelector("body"),rootMargin:"0px",threshold:1};t=u({},o,t);var r=document.querySelectorAll(e);if(r.length){var i=function(t){t.forEach((function(t){t.isIntersecting&&t.target.classList.add(n)}))},a=new IntersectionObserver(i,t);r.forEach((function(t){return a.observe(t)}))}else console.warn("No observerable elements named",e)},v=function(e){var n=document.querySelector("#articles"),o=document.querySelector("#loader");o.style.opacity=1,c(),n.innerHTML=e.top_stories.results.map((function(e){var n,o,r,i,a,c,s,u,d,v,h,f,m=t.indexOf(l(e.section))>=0;if(!m&&"admin"===e.section)return"";if(!e.abstract)return"";var y='<li>\n                                    <article class="news-item '.concat(l(e.section),'">\n                                        <header>');return"multimedia"in e&&null!==e.multimedia&&e.multimedia.length>=3&&(y+='<a href="'.concat(l(null==e?void 0:e.short_url),'" title="').concat(l(e.title),'">\n                                                <img class="loading-bg"\n                                                scrset="').concat(l(null===(n=e.multimedia[0])||void 0===n?void 0:n.url)," ").concat(l(null===(o=null==e?void 0:e.multimedia[0])||void 0===o?void 0:o.width),"w,\n                                                    ").concat(l(null===(r=e.multimedia[1])||void 0===r?void 0:r.url)," ").concat(l(null===(i=null==e?void 0:e.multimedia[1])||void 0===i?void 0:i.width),"w,\n                                                    ").concat(l(null===(a=e.multimedia[2])||void 0===a?void 0:a.url)," ").concat(l(null===(c=null==e?void 0:e.multimedia[2])||void 0===c?void 0:c.width),"w,\n                                                    ").concat(l(null===(s=e.multimedia[3])||void 0===s?void 0:s.url)," ").concat(l(null===(u=null==e?void 0:e.multimedia[3])||void 0===u?void 0:u.width),'w"\n                                                src="').concat(l(null===(d=e.multimedia[1])||void 0===d?void 0:d.url),'"\n                                                 height="').concat(l(null===(v=e.multimedia[1])||void 0===v?void 0:v.height),'"\n                                                 width="').concat(l(null===(h=null==e?void 0:e.multimedia[1])||void 0===h?void 0:h.width),'"\n                                                alt="').concat(l(null===(f=null==e?void 0:e.multimedia[1])||void 0===f?void 0:f.copyright),'" loading="lazy" role="presentation"/>\n                                            </a>')),y+='</header>\n                                        <section class="news-content">\n                                            <header>\n                                                <h3 class="hyphens"><a href="'.concat(l(e.short_url),'">').concat(e.title,'</a></h3>\n                                                  <p class="details">'),m?y+='<a class="pill '.concat(l(e.section),'" href="https://www.nytimes.com/section/').concat(l(e.section),'">'):e.section&&(y+='<span class="pill '.concat(l(e.section),'">')),y+="".concat(l(e.section)," ").concat(m?"</a>":"</span>","\n                                                    ").concat((null==e?void 0:e.byline)?'<span class="byline">':"","\n                                                    ").concat((null==e?void 0:e.byline)?l(null==e?void 0:e.byline):"","\n                                                    ").concat((null==e?void 0:e.byline)?"</span>":"",'\n                                                </p>\n                                            </header>\n                                            <div class="abstract">'),e.abstract&&(y+='<p class="hyphens">'.concat(l(null==e?void 0:e.abstract),'\n                                        <a href="').concat(l(e.short_url),'" title="').concat(l(e.title),'" class="read-more">[...more]</a>\n                                      </p>')),y+="</div>\n                                        </section>\n                                    </article>\n                                </li>"})).join(""),o.style.opacity=0,d({root:document.querySelector("#newsfeed-wrap"),threshold:.25},".news-item")};function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function m(t,e){return e.get?e.get.call(t):e.value}function y(t,e){return m(t,f(t,e,"get"))}function g(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(t,e,n){g(t,e),e.set(t,n)}function p(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function b(t,e,n){return p(t,f(t,e,"set"),n),n}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function k(t,e){g(t,e),e.add(t)}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function L(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}function A(t,e,n){return L(t,e),n}var q=new WeakMap,O=new WeakMap,T=new WeakMap,_=new WeakSet,j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pocket";if(h(this,t),k(this,_),w(this,q,{writable:!0,value:void 0}),w(this,O,{writable:!0,value:void 0}),w(this,T,{writable:!0,value:void 0}),b(this,O,o?window.localStorage:window.sessionStorage),!e)throw new Error('Satchel: a "key" is required.');if("string"!=typeof e)throw new Error('Satchel: "key" must be a string.');if(!S(this,_,I).call(this,n))throw new Error("Satchel: {cargo} must be an object.");if("boolean"!=typeof o)throw new Error('Satchel: "local" must be a boolean.');if("string"!=typeof r)throw new Error('Satchel: "pocket" must be a string.');b(this,q,"".concat(t.stcl,".").concat(r,".").concat(e)),b(this,T,{data:void 0,expiry:null}),n=u({},y(this,T),n),this.set(n)}var e,n,o;return e=t,n=[{key:"age",value:function(){var t=JSON.parse(y(this,O).getItem(y(this,q)));return t?{age:Date.now()-t._creation,creation:t._creation,expiry:t.expiry?t.expiry:null,fresh:this.isFresh()}:null}},{key:"bin",value:function(){var e=y(this,O).getItem(y(this,q));return e?(y(this,O).removeItem(y(this,q)),A(t,t,x).call(t,{key:y(this,q),oldValue:e,storageArea:A(t,t,N).call(t,y(this,O)),action:"bin"}),!0):null}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=y(this,O).getItem(y(this,q));return e?!!(this.isFresh()&&!t||t)&&JSON.parse(e):null}},{key:"set",value:function(e){var n=e.data,o=e.expiry,r=JSON.parse(y(this,O).getItem(y(this,q)));if(n=(null==r?void 0:r.data)&&!n?r.data:n,o=(null==r?void 0:r.expiry)&&!o?r.expiry:o,n&&"string"!=typeof n&&"number"!=typeof n&&!S(this,_,I).call(this,n))throw new Error("Satchel.set({data}): must be either null or a number, string or object.");if("number"!=typeof o&&null!==o)throw new Error('Satchel.set({expiry}): "expiry" must be null or a number.');if(n&&S(this,_,I).call(this,n))try{JSON.parse(JSON.stringify(n))}catch(t){throw new Error("Satchel.set({data}): ".concat(t))}var i=this.get(!0),a={};return a.data=n||null,a.expiry=o||null,a._creation=(null==i?void 0:i._creation)||Date.now(),y(this,O).setItem(y(this,q),JSON.stringify(a)),A(t,t,x).call(t,{key:y(this,q),newValue:JSON.stringify(a),oldValue:i?JSON.stringify(i):null,storageArea:A(t,t,N).call(t,y(this,O)),action:"set"}),this}},{key:"isFresh",value:function(){var t=JSON.parse(y(this,O).getItem(y(this,q)));return t?!(null==t?void 0:t.expiry)||t.expiry-Date.now()>0:null}},{key:"getKey",value:function(){return y(this,q)}}],o=[{key:"stcl",get:function(){return this._stcl?this._stcl:"stcl"},set:function(t){if("string"!=typeof t)throw new Error("Satchel.stcl must be a string.");this._stcl=t}},{key:"getSatchel",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pocket";if(!e)throw new Error('Satchel.getSatchel(key): a "key" is required.');if("string"!=typeof e)throw new Error('Satchel.getSatchel(key): "key" must be a string.');if("boolean"!=typeof n)throw new Error('Satchel.getSatchel(key, local): "local" must be a boolean.');if("string"!=typeof o)throw new Error('Satchel.getSatchel(key, local, pocket): "pocket" must be an string.');var r="".concat(t.stcl,".").concat(o,".").concat(e),i=n?window.localStorage:window.sessionStorage,a=JSON.parse(i.getItem(r));return a&&0!==a.length?new t(e,a,n,o):null}},{key:"setKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pocket";new t(e,n,o,r)}}],n&&E(e.prototype,n),o&&E(e,o),t}();
/* ! @preserve @bnjmnrsh/satchel v0.2.4.1 | (c) 2022 bnjmnrsh | ISC | https://github.com/bnjmnrsh/satchel */function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=u({key:null,newValue:null,oldValue:null,storageArea:null,url:window.location.href,action:null},t);var e=new CustomEvent("Satchel",{bubbles:!0,cancelable:!0,detail:t});return document.dispatchEvent(e)}function N(t){return t===window.localStorage?"LocalStorage":"SessionStorage"}function I(t){return t&&"object"==typeof t&&t.constructor===Object}s(j,"_stcl",void 0);var M=function(t){var e,n,o,r;return console.warn("err",t),'\n<div id="ohnos">\n  <h3><span aria-hidden="true">⥀.⥀ <br/></span>Oh Nooos!</h3>\n  <p class="sr-only">There has been a crittical error:</p>\n    <div>\n<pre>\n'.concat(t.stack||"","\n").concat(t.type||"","\n").concat("".concat(t.statusText||""," ").concat(t.status||""),"\n").concat(429===(null===(e=t.top_stories)||void 0===e?void 0:e.status)?"".concat(t.top_stories.status," too many requests"):null===(n=t.top_stories)||void 0===n?void 0:n.status,"\n").concat((null===(o=t.top_stories)||void 0===o?void 0:o.error)||"","\n").concat((null===(r=t.top_stories)||void 0===r?void 0:r.error_message)?" Route not found: ".concat(t.top_stories.error_message.split("/").pop().replace(".json","")):"","\n</pre>\n    </div>\n</div>")};function J(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=j.getSatchel(t,!0,"svn-store");if((null==o?void 0:o.isFresh())||!navigator.onLine||n)return!!(null===(e=null==o?void 0:o.get(!navigator.onLine))||void 0===e?void 0:e.data)&&(console.log("loading from store ..."),v(o.get(!navigator.onLine).data),document.body.querySelector("#newsfeed-wrap").scrollTo(0,0),document.body.classList.remove("loading"),!0)}var D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",e=document.querySelector("#loader");e.style.opacity=1;var n=J(t);if(!n&&navigator.onLine){document.body.classList.add("loading");var o=new Promise((function(n,o){var r;console.log("fetching fresh articles..."),fetch("https://signal-v-noise-worker.bnjmnrsh.workers.dev?section="+t).then((function(t){if(document.body.classList.remove("loading"),r=t.json(),t.ok&&200===t.status)return r;throw t})).then((function(e){if("OK"!==e.top_stories.status)throw e;v(e);var n=Date.now()+12e4;return j.setKey(t,{data:e,expiry:n},!0,"svn-store"),document.body.querySelector("#newsfeed-wrap").scrollTo(0,0),e})).catch((function(n){e.style.opacity=0;var o,r,i=document.querySelector("#articles");if((console.error(n),i)&&(console.log(null==n||null===(o=n.top_stories)||void 0===o?void 0:o.status),429===(null==n||null===(r=n.top_stories)||void 0===r?void 0:r.status))){var a=J(t);console.warn("429 too many requests, trying store"),a||(i.innerHTML=M(n))}}))}));return o}},H=function(){var t=window.location.hash.replace("#",""),e=document.querySelector("#app").getAttribute("data-section");t=t||"home",!e&&t&&(e=t,document.querySelector("#app").setAttribute("data-section",t)),"null"===t||"head"===t?(window.removeEventListener("hashchange",H),window.location.hash=e,setTimeout((function(){return window.addEventListener("hashchange",H)}),1)):D(t)};function P(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pocket",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"stcl",o=t?window.localStorage:window.sessionStorage,r=Object.keys(o).map((function(t){return t.startsWith(n+"."+e)?t:""})).filter((function(t){return t}));return Array.from(r)}window.addEventListener("hashchange",H);window.addEventListener("Satchel",(function(t){if("Satchel"!==t.type)return;if("svn-store"!==t.detail.key.split(".")[1])return;var e=t.detail.key.split(".")[2];document.querySelectorAll('[data-section="'.concat(e,'"]')).forEach((function(t){t.setAttribute("data-stored",!0)}))}
/* ! @preserve @bnjmnrsh/toast v0.1.0 | (c) 2022 bnjmnrsh | ISC | git+https://github.com/bnjmnrsh/Toast.git */));var C,V,W,z=function(){var t={selector:"body",className:"toast"};return function(e){var n=0,o={};if(o.settings=u({},t,e),o.className=o.settings.className,o.target=document.querySelector(o.settings.selector),!o.target)throw new Error('Toast: the target element "'.concat(o.settings.selector,'" could not be found.'));return o.create=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!t)throw new Error("Toast.js requires a message string!");s=s||"".concat(o.settings.selector,"-").concat(n++).toString();var u=document.createElement("div");return u.setAttribute("role","alert"),u.setAttribute("data-toast-id",s),(e=u.classList).add.apply(e,[this.className].concat(a(c))),r&&setTimeout((function(){return u.remove()}),r),i?(u.innerHTML="".concat(t,' <button class="toast-close" arial-lable="close">&#x2715</button>'),u.addEventListener("click",(function(t){t.target.matches(".toast-close")&&(u.remove(),u.removeEventListener("click",close))}))):u.innerHTML="".concat(t),l?o.target.prepend(u):o.target.append(u),setTimeout((function(){return u.innerHTML}),1),s},o.destroy=function(t){if(!t)return!1;var e=document.querySelector('[data-toast-id="'.concat(t,'"]'));return!!e&&(e.remove(),o)},o}}(),F=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&t.forEach((function(t){e?"false"===t.dataset.stored&&(t.setAttribute("data-href",t.href),t.removeAttribute("href","href-disabled"),t.setAttribute("aria-disabled",!0)):(t.setAttribute("href",t.dataset.href),t.removeAttribute("aria-disabled"),t.removeAttribute("data-href"))}))},K=document.querySelector("#app");!function(){var t=navigator.onLine?"online":"offline";document.body.setAttribute("data-network",t);var e=new z,n="",o=Date.now().toString();window.addEventListener("offline",(function(t){var r=document.querySelectorAll(".noise .pill");console.log(r),console.warn("Network unavailable"),o=Date.now(),F(r),document.body.setAttribute("data-network","offline"),n=e.create("Sorry, you are currently off line",0,!1,!0,["offline-notice"])})),window.addEventListener("online",(function(){var t=document.querySelectorAll(".noise .pill");console.log(t),console.warn("Network available"),document.body.setAttribute("data-network","online"),F(t,!1),Date.now()-o>3e4&&H(),e.destroy(n)}))}(),C=K,V=t,W=P(!0,"svn-store"),C.querySelector("nav").innerHTML="<ul>"+V.map((function(t){var e=W.includes("stcl.svn-store."+t);return'<li><a href="#'.concat(t,'" class="pill ').concat(t,'" data-section="').concat(t,'" data-stored="').concat(e,'">').concat(t,"</a></li>")})).join("")+"</ul>",H(),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:125,n=document.querySelector(t),o=document.querySelector("#stt"),r=function(t){(t.scrollY||t.scrollTop)>e?(document.body.classList.add("scrolled"),o.classList.add("-is-revealed")):(document.body.classList.remove("scrolled"),o.classList.remove("-is-revealed"))};window.addEventListener("scroll",(function(t){return r(window)})),n.addEventListener("scroll",(function(t){return r(n)})),o.addEventListener("click",(function(t){document.scrollingElement.scrollTo(0,0),n.scrollTo(0,0)}))}("#newsfeed-wrap");
//# sourceMappingURL=index.d7359382.js.map
