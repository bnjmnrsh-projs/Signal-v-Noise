/*! signal-v-noise v1.0.0 | (c) 2022 benjmnrsh@gmail.com | ISC License | https://github.com/bnjmnrsh-projs/signal-v-noise */

var t=["home","arts","automobiles","books","business","climate","dining","fashion","food","health","insider","magazine","movies","nyregion","obituaries","opinion","politics","realestate","science","sports","style","sundayreview","technology","theater","t-magazine","travel","upshot","us","world"],e=function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML};function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter((function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable})))),r.forEach((function(e){n(t,e,o[e])}))}return t}addEventListener("click",(function(t){"section"in t.target.dataset&&(document.querySelector("#app").setAttribute("data-section",t.target.dataset.section),t.target.classList.add("active"))}));var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".observable",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"loaded",r={root:document.querySelector("body"),rootMargin:"0px",threshold:1};t=o({},r,t);var i=document.querySelectorAll(e);if(i.length){var a=function(t){t.forEach((function(t){t.isIntersecting&&t.target.classList.add(n)}))},c=new IntersectionObserver(a,t);i.forEach((function(t){return c.observe(t)}))}else console.warn("No observerable elements named",e)},i=function(n){var o,i,a,c=document.querySelector("#articles"),l=document.querySelector("#loader");l.style.opacity=1,i=window.location.hash.replace("#",""),a=document.querySelector("nav.noise"),o&&a.querySelectorAll(".pill").forEach((function(t){t.classList.remove("active"),t.classList.contains(i)&&t.classList.add("active")})),c.innerHTML=n.top_stories.results.map((function(n){var o,r,i,a,c,l,s,d,u,v,m,h,f=t.indexOf(e(n.section))>=0;if(!f&&"admin"===n.section)return"";if(!n.abstract)return"";var p='<li>\n                                    <article class="news-item '.concat(e(n.section),'">\n                                        <header>');return"multimedia"in n&&null!==n.multimedia&&n.multimedia.length>=3&&(p+='<a href="'.concat(e(null==n?void 0:n.short_url),'" title="').concat(e(n.title),'">\n                                                <img class="loading-bg"\n                                                scrset="').concat(e(null===(o=n.multimedia[0])||void 0===o?void 0:o.url)," ").concat(e(null===(r=null==n?void 0:n.multimedia[0])||void 0===r?void 0:r.width),"w,\n                                                    ").concat(e(null===(i=n.multimedia[1])||void 0===i?void 0:i.url)," ").concat(e(null===(a=null==n?void 0:n.multimedia[1])||void 0===a?void 0:a.width),"w,\n                                                    ").concat(e(null===(c=n.multimedia[2])||void 0===c?void 0:c.url)," ").concat(e(null===(l=null==n?void 0:n.multimedia[2])||void 0===l?void 0:l.width),"w,\n                                                    ").concat(e(null===(s=n.multimedia[3])||void 0===s?void 0:s.url)," ").concat(e(null===(d=null==n?void 0:n.multimedia[3])||void 0===d?void 0:d.width),'w"\n                                                src="').concat(e(null===(u=n.multimedia[1])||void 0===u?void 0:u.url),'"\n                                                 height="').concat(e(null===(v=n.multimedia[1])||void 0===v?void 0:v.height),'"\n                                                 width="').concat(e(null===(m=null==n?void 0:n.multimedia[1])||void 0===m?void 0:m.width),'"\n                                                alt="').concat(e(null===(h=null==n?void 0:n.multimedia[1])||void 0===h?void 0:h.copyright),'" role="presentation"/>\n                                            </a>')),p+='</header>\n                                        <section class="news-content">\n                                            <header>\n                                                <h3 class="hyphens"><a href="'.concat(e(n.short_url),'">').concat(n.title,'</a></h3>\n                                                  <p class="details">'),f?p+='<a class="pill '.concat(e(n.section),'" href="https://www.nytimes.com/section/').concat(e(n.section),'">'):n.section&&(p+='<span class="pill '.concat(e(n.section),'">')),p+="".concat(e(n.section)," ").concat(f?"</a>":"</span>","\n                                                    ").concat((null==n?void 0:n.byline)?'<span class="byline">':"","\n                                                    ").concat((null==n?void 0:n.byline)?e(null==n?void 0:n.byline):"","\n                                                    ").concat((null==n?void 0:n.byline)?"</span>":"",'\n                                                </p>\n                                            </header>\n                                            <div class="abstract">'),n.abstract&&(p+='<p class="hyphens">'.concat(e(null==n?void 0:n.abstract),'\n                                        <a href="').concat(e(n.short_url),'" title="').concat(e(n.title),'" class="read-more">[...more]</a>\n                                      </p>')),p+="</div>\n                                        </section>\n                                    </article>\n                                </li>"})).join(""),l.style.opacity=0,r({root:document.querySelector("#newsfeed-wrap"),threshold:.25},".news-item")},a=function(t){var e;return'\n<div id="ohnos">\n  <h3><span aria-hidden="true">⥀.⥀ <br/></span>Oh Nooos!</h3>\n  <p class="sr-only">There has been a crittical error:</p>\n    <div>\n<pre>\n'.concat(t.stack||"","\n").concat(t.type||"","\n").concat("".concat(t.statusText||""," ").concat(t.status||""),"\n").concat(429===t.top_stories.status?"".concat(t.top_stories.status," too many requests"):t.top_stories.status,"\n").concat((null===(e=t.top_stories)||void 0===e?void 0:e.error)||"","\n").concat(t.top_stories.error_message?" Route not found: ".concat(t.top_stories.error_message.split("/").pop().replace(".json","")):"","\n</pre>\n    </div>\n</div>")},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",e=document.querySelector("#loader");if(e.style.opacity=1,navigator.onLine){var n=new Promise((function(n,o){var r;document.body.classList.add("loading"),fetch("https://signal-v-noise-worker.bnjmnrsh.workers.dev?section="+t).then((function(t){if(document.body.classList.remove("loading"),r=t.json(),t.ok&&200===t.status)return r;throw t})).then((function(t){if("OK"!==t.top_stories.status)throw t;return i(t),document.body.querySelector("#newsfeed-wrap").scrollTo(0,0),t})).catch((function(t){e.style.opacity=0;var n=document.querySelector("#articles");console.error(t),n&&(n.innerHTML=a(t))}))}));return n}},l=function(){var t=window.location.hash.replace("#",""),e=document.querySelector("#app").getAttribute("data-section");t=t||"home",!e&&t&&(e=t,document.querySelector("#app").setAttribute("data-section",t)),"null"===t||"head"===t?(window.removeEventListener("hashchange",l),window.location.hash=e,setTimeout((function(){return window.addEventListener("hashchange",l)}),1)):c(t)};window.addEventListener("hashchange",l);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function d(t){if(Array.isArray(t))return s(t)}function u(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function h(t){return d(t)||u(t)||m(t)||v()}var f,p=function(){var t={selector:"body",className:"toast",prepend:!1},e=function(e){var n=0,r={};r.settings=o({},e,t),r.target=document.querySelector(r.settings.selector),r.className=r.settings.className;var i=function(){return(n++).toString()};return r.create=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(this.target&&t){l=l||i();var s=document.createElement("div");return s.setAttribute("role","alert"),s.setAttribute("data-toast",l),(e=s.classList).add.apply(e,[this.className].concat(h(c))),n&&setTimeout((function(){s.remove()}),n),o?(s.innerHTML="".concat(t,' <button class="toast-close" arial-lable="close">&#x2715</button>'),s.addEventListener("click",(function(t){t.target.matches(".toast-close")&&(s.remove(),s.removeEventListener("click",close))}))):s.innerHTML="".concat(t),a?r.target.prepend(s):r.target.append(s),setTimeout((function(){return s.innerHTML}),1),l}},r.destroy=function(t){if(t){var e=document.querySelector('[data-toast="'.concat(t,'"]'));e&&e.remove()}},r};return e}(),y=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&t.forEach((function(t){e?(t.setAttribute("data-href",t.href),t.removeAttribute("href","href-disabled"),t.setAttribute("aria-disabled",!0)):(t.setAttribute("href",t.dataset.href),t.removeAttribute("aria-disabled"),t.removeAttribute("data-href"))}))},b=document.querySelector("#app");!function(){var t=navigator.onLine?"online":"offline";document.body.setAttribute("data-network",t);var e=new p,n="",o=Date.now().toString();window.addEventListener("offline",(function(t){var r=document.querySelectorAll(".noise .pill");console.log(r),console.warn("Network unavailable"),o=Date.now(),y(r),document.body.setAttribute("data-network","offline"),n=e.create("Sorry, you are currently off line",0,!1,!0,["offline-notice"])})),window.addEventListener("online",(function(){var t=document.querySelectorAll(".noise .pill");console.log(t),console.warn("Network available"),document.body.setAttribute("data-network","online"),y(t,!1),Date.now()-o>3e4&&l(),e.destroy(n)}))}(),f=t,b.querySelector("nav").innerHTML="<ul>"+f.map((function(t){return'<li><a href="#'.concat(t,'" class="pill ').concat(t,'" data-section="').concat(t,'">').concat(t,"</a></li>")})).join("")+"</ul>",l(),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=function(t){t.scrollTop||t.scrollY>e?(document.body.classList.add("scrolled"),r.classList.add("-is-revealed")):(document.body.classList.remove("scrolled"),r.classList.remove("-is-revealed"))},o=document.querySelector(t),r=document.querySelector("#stt");window.addEventListener("scroll",(function(t){return n(window)})),o.addEventListener("scroll",(function(t){return n(o)})),r.addEventListener("click",(function(t){document.scrollingElement.scrollTo(0,0),o.scrollTo(0,0)}))}("#newsfeed-wrap");
//# sourceMappingURL=index.f9fd6dfc.js.map
