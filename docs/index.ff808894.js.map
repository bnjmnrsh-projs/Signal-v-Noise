{"mappings":"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","sources":["src/js/_scroll_to_top.js","src/js/_section_array.js","node_modules/@swc/helpers/src/_class_extract_field_descriptor.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_get.mjs","node_modules/@swc/helpers/src/_class_private_field_get.mjs","node_modules/@swc/helpers/src/_check_private_redeclaration.mjs","node_modules/@swc/helpers/src/_class_private_field_init.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_set.mjs","node_modules/@swc/helpers/src/_class_private_field_set.mjs","node_modules/@swc/helpers/src/_class_private_method_get.mjs","node_modules/@swc/helpers/src/_class_check_private_static_access.mjs","node_modules/@swc/helpers/src/_class_static_private_method_get.mjs","node_modules/@swc/helpers/src/_define_property.mjs","node_modules/@bnjmnrsh/satchel/src/Satchel.js","node_modules/@swc/helpers/src/_class_private_method_init.mjs","src/js/_get_articles.js","src/js/_helpers.js","src/js/_observer.js","src/js/_build_articles.js","src/js/_nav_active_link.js","src/js/_build_errors.js","src/js/_simple_router.js","node_modules/@bnjmnrsh/satchel/src/bindle.js","src/js/_build_nav.js","node_modules/@bnjmnrsh/toast/src/Toast.js","src/js/_network.js","src/js/app.js"],"sourcesContent":["/**\n * Scroll to the top of an element and add or remove classes for styleing.\n * The scrolling speed & behavior is managed by css.\n *\n * @param string targetEl class name of the element to be scrolled to the top.\n */\nexport const scrollToTop = function (targetEl, triggerPoint = 125) {\n  const scrollingEl = document.querySelector(targetEl)\n  const sttEl = document.querySelector('#stt')\n\n  const elTrigger = function (el) {\n    // window does not have scrollTop\n    const scrollHeight = el.scrollY || el.scrollTop\n    if (scrollHeight > triggerPoint) {\n      document.body.classList.add('scrolled')\n      sttEl.classList.add('-is-revealed')\n    } else {\n      document.body.classList.remove('scrolled')\n      sttEl.classList.remove('-is-revealed')\n    }\n  }\n\n  window.addEventListener('scroll', (e) => elTrigger(window))\n  scrollingEl.addEventListener('scroll', (e) => elTrigger(scrollingEl))\n\n  sttEl.addEventListener('click', (e) => {\n    document.scrollingElement.scrollTo(0, 0)\n    scrollingEl.scrollTo(0, 0)\n  })\n}\n","/*\n      The sections listed, in the 'section' param in the API, may not always resolve to\n        a section via https://www.nytimes.com/section/{section}.\n      The list that appears on the top-stories doumentation, is also not complete.\n      As there isn't an endpoint that I am aware of for getting an official list of sections,\n      I'm rolling own.\n\n      https://developer.nytimes.com/docs/top-stories-product/1/overview\n  */\nexport const aSections = [\n  'home',\n  'arts',\n  'automobiles',\n  'books',\n  'business',\n  'climate',\n  'dining',\n  'fashion',\n  'food',\n  'health',\n  'insider',\n  'magazine',\n  'movies',\n  'nyregion',\n  'obituaries',\n  'opinion',\n  'politics',\n  'realestate',\n  'science',\n  'sports',\n  'style',\n  'sundayreview',\n  'technology',\n  'theater',\n  't-magazine',\n  'travel',\n  'upshot',\n  'us',\n  'world'\n]\n","export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\n","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorGet from './_class_apply_descriptor_get.mjs';\n\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration.mjs\";\n\nexport default function _classPrivateFieldInit(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\n","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      // This should only throw in strict mode, but class bodies are\n      // always strict and private fields can only be used inside\n      // class bodies.\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorSet from './_class_apply_descriptor_set.mjs';\n\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\n","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n","export default function _classCheckPrivateStaticAccess(receiver, classConstructor) { \n  if (receiver !== classConstructor) {\n    throw new TypeError(\"Private static access of wrong provenance\");\n  } \n}\n","import classCheckPrivateStaticAccess from \"./_class_check_private_static_access.mjs\"\n\nexport default function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n  classCheckPrivateStaticAccess(receiver, classConstructor); return method;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","/**\n * A utility for managaing the freshness of namespaced sessionStorage and localStorage entries.\n */\nclass Satchel {\n  static _stcl\n  #pocketKey\n  #store\n  #settings\n\n  /**\n   * @class Satchel\n   * @classdec Create new Satchel instance\n   * @param {string|null} key Storage key\n   * @param {object} cargo The cargo payload to be saved to Storage\n   * @property {object|string} cargo.data The data to be saved, may be string or object\n   * @property {number|null} cargo.expiry The expiry time of the cargo ,may be a number or null\n   * @param {boolean} [local=false] Specify sessionStorage (default) or localStorage\n   * @param {string} [pocket='pocket'] Namespace for Storage keys, default is 'pocket'\n   */\n  constructor(key = null, cargo = {}, local = false, pocket = 'pocket') {\n    this.#store = local ? window.localStorage : window.sessionStorage\n    if (!key) {\n      throw new Error('Satchel: a \"key\" is required.')\n    }\n    if (typeof key !== 'string') {\n      throw new Error('Satchel: \"key\" must be a string.')\n    }\n    if (!this.#isObject(cargo)) {\n      throw new Error('Satchel: {cargo} must be an object.')\n    }\n    if (typeof local !== 'boolean') {\n      throw new Error('Satchel: \"local\" must be a boolean.')\n    }\n    if (typeof pocket !== 'string') {\n      throw new Error('Satchel: \"pocket\" must be a string.')\n    }\n\n    this.#pocketKey = `${Satchel.stcl}.${pocket}.${key}`\n    this.#settings = { data: undefined, expiry: null }\n\n    cargo = { ...this.#settings, ...cargo }\n\n    // Set the cargo to Storage\n    this.set(cargo)\n  }\n\n  /**\n   * Setter for Satchel.stcl must be a string.\n   *\n   * @static\n   * @memberof Satchel\n   */\n  static set stcl(prefix) {\n    if (typeof prefix !== 'string') {\n      throw new Error('Satchel.stcl must be a string.')\n    }\n    this._stcl = prefix\n  }\n\n  /**\n   * Getter for the Satchel.stcl property.\n   * Returns the prefix for current Satchel instance, defaulting to 'stcl'.\n   *\n   * @static\n   * @memberof Satchel\n   */\n  static get stcl() {\n    return this._stcl ? this._stcl : 'stcl'\n  }\n\n  /**\n   * Returns an object of age and freshness related data\n   *\n   * @typedef {object} Age object\n   * @property {number} age in milliseconds\n   * @property {number} creation Date.now() (ms)src/Satchel.js\n   * @property {boolean} fresh if Store key is fresh\n   * @return {Age|null} An age object representing the age of the current Store key.\n   */\n  age() {\n    const store = JSON.parse(this.#store.getItem(this.#pocketKey))\n    if (!store) return null\n    return {\n      age: Date.now() - store._creation,\n      creation: store._creation,\n      expiry: store.expiry ? store.expiry : null,\n      fresh: this.isFresh()\n    }\n  }\n\n  /**\n   * Remove the current namespaced key from the store.\n   *\n   * @returns { boolian:true | null } Returns true on success, or null if no record found.\n   */\n  bin() {\n    const item = this.#store.getItem(this.#pocketKey)\n    if (!item) return null\n    this.#store.removeItem(this.#pocketKey)\n    Satchel.#emit({\n      key: this.#pocketKey,\n      oldValue: item,\n      storageArea: Satchel.#storageAreaString(this.#store),\n      action: 'bin'\n    })\n    return true\n  }\n\n  /**\n   * Get the data for the current Storage key.\n   *\n   * @param {boolean} getStale flag to ignore stale entries from a \"pocket\"\n   * @returns {object|boolan:false} the data for the stored key or false.\n   */\n  get(getStale = false) {\n    const item = this.#store.getItem(this.#pocketKey)\n    if (!item) return null\n    if ((this.isFresh() && !getStale) || getStale) {\n      return JSON.parse(item)\n    }\n    return false\n  }\n\n  /**\n   * Sets the cargo object for a given key and namespace.\n   *\n   * @param {object} settings object\n   * @property {object|string} data the Storage object to set\n   * @property {number|null} expiry the expiery date in (ms)\n   *\n   * @return {Satchel} Satchel\n   */\n  set({ data, expiry }) {\n    // check if a key exists in store already\n    const exsisting = JSON.parse(this.#store.getItem(this.#pocketKey))\n    // allow data and expiry to be set independently\n    data = exsisting?.data && !data ? exsisting.data : data\n    expiry = exsisting?.expiry && !expiry ? exsisting.expiry : expiry\n\n    if (\n      data &&\n      typeof data !== 'string' &&\n      typeof data !== 'number' &&\n      !this.#isObject(data)\n    ) {\n      throw new Error(\n        'Satchel.set({data}): must be either null or a number, string or object.'\n      )\n    }\n\n    if (typeof expiry !== 'number' && expiry !== null) {\n      throw new Error(\n        'Satchel.set({expiry}): \"expiry\" must be null or a number.'\n      )\n    }\n    if (data && this.#isObject(data)) {\n      try {\n        JSON.parse(JSON.stringify(data))\n      } catch (e) {\n        throw new Error(`Satchel.set({data}): ${e}`)\n      }\n    }\n    const storedEntry = this.get(true)\n    const temp = {}\n    temp.data = data || null\n    temp.expiry = expiry || null\n\n    // dont overwrite existing creation time\n    temp._creation = storedEntry?._creation || Date.now()\n    // Set storage values\n    this.#store.setItem(this.#pocketKey, JSON.stringify(temp))\n\n    Satchel.#emit({\n      key: this.#pocketKey,\n      newValue: JSON.stringify(temp),\n      oldValue: storedEntry ? JSON.stringify(storedEntry) : null,\n      storageArea: Satchel.#storageAreaString(this.#store),\n      action: 'set'\n    })\n    return this\n  }\n\n  /**\n   * Check if current item is fresh.\n   *\n   * @returns {boolean|null} true if the item has not expired, null if the record doesn't exist.\n   */\n  isFresh() {\n    const store = JSON.parse(this.#store.getItem(this.#pocketKey))\n    if (!store) return null\n    return !store?.expiry ? true : store.expiry - Date.now() > 0\n  }\n\n  /**\n   * Returns the current namespaced Store key (pocket.key), the key is prefixed with 'stcl'.\n   * Note that this is the internal reference to the key, not proof the key has been set to Storage.\n   *\n   * @returns {string} the key to the current pocket-key\n   */\n  getKey() {\n    return this.#pocketKey\n  }\n\n  /**\n   * Emulates the StorageEvent API, which may be preferable for some use cases.\n   * https://developer.mozilla.org/en-US/docs/Web/API/StorageEvent\n   *\n   * Emit custom events for Satchel\n   * @typedef {CustomEvent}\n   * @param {object} detail Event details\n   * @property {string|null} detail.key name of the Storage key being called\n   * @property {string|null} detail.pocket name of the Storage pocket being cleaned\n   * @property {string|null} detail.newValue the updated value of the Storage key\n   * @property {string|null} detail.oldValue the old value of the Storage key\n   * @property {number|null} detail.keysBefore then number of keys in the pocket before emptyPocket or tidyPocket\n   * @property {number|null} detail.keysAfter then number of keys in the pocket after emptyPocket or tidyPocket\n   * @property {string} detail.storageArea, the type of Storage object\n   * @property {string} detail.url, the url of the document whoes key changed\n   * @property {string} detail.action the name of the Satchel function emiting the event\n   * @property {boolean} [pocketClean = false] Optional flag to indiacte a emptyPocket or tidyPocket opperation.\n   * @returns {CustomEvent} CustomEvent\n   */\n  static #emit(detail = {}) {\n    const required = {\n      key: null,\n      newValue: null,\n      oldValue: null,\n      storageArea: null,\n      url: window.location.href,\n      action: null\n    }\n    detail = { ...required, ...detail }\n    const event = new CustomEvent('Satchel', {\n      bubbles: true,\n      cancelable: true,\n      detail\n    })\n    return document.dispatchEvent(event)\n  }\n\n  /**\n   * Get the Storage type as a string: 'localStorage' or 'sessionStorage'.\n   *\n   * @param {object} Storage object\n   * @returns {string} the Storage type as a string 'localStorage' or 'SessionStorage'\n   */\n  static #storageAreaString(store) {\n    return store === window.localStorage ? 'LocalStorage' : 'SessionStorage'\n  }\n\n  /**\n   * Test if a value is an interable object.\n   *\n   * @param {*} doesit the value to be checked\n   * @returns\n   */\n  #isObject(doesit) {\n    return doesit && typeof doesit === 'object' && doesit.constructor === Object\n  }\n\n  /**\n   * Returns an instance of Satchel associated with the given key, pocket,store, or false if none is found.\n   *\n   * @param {string} key key for the stored item\n   * @param {string} [pocket='pocket'] namespace prefix, default 'pocket'\n   * @param {string} [local='false'] specify sessionStorage (default) or localStorage\n   * @returns {Satchel|false} new Satchel instance | false\n   */\n  static getSatchel(key, local = false, pocket = 'pocket') {\n    if (!key) {\n      throw new Error('Satchel.getSatchel(key): a \"key\" is required.')\n    }\n    if (typeof key !== 'string') {\n      throw new Error('Satchel.getSatchel(key): \"key\" must be a string.')\n    }\n    if (typeof local !== 'boolean') {\n      throw new Error(\n        'Satchel.getSatchel(key, local): \"local\" must be a boolean.'\n      )\n    }\n    if (typeof pocket !== 'string') {\n      throw new Error(\n        'Satchel.getSatchel(key, local, pocket): \"pocket\" must be an string.'\n      )\n    }\n\n    const pocketKey = `${Satchel.stcl}.${pocket}.${key}`\n    const store = local ? window.localStorage : window.sessionStorage\n    const item = JSON.parse(store.getItem(pocketKey))\n    if (!item || item.length === 0) return null\n\n    return new Satchel(key, item, local, pocket)\n  }\n\n  /**\n   * A static method for setting a Satchel key, without calling `new Satchel`.\n   * When you want to use Satchel only for it's side effects.\n   *\n   * @param {string|null} key Storage key\n   * @param {object} cargo The cargo payload to be saved to Storage\n   * @property {object|string} cargo.data The data to be saved, may be string or object\n   * @property {number|null} cargo.expiry The expiry time of the cargo ,may be a number or null\n   * @param {boolean} [local=false] Specify sessionStorage (default) or localStorage\n   * @param {string} [pocket='pocket'] Namespace for Storage keys, default is 'pocket'\n   * @returns {undefined}\n   */\n  static setKey(key = null, cargo = {}, local = false, pocket = 'pocket') {\n    /* eslint-disable no-new */\n    new Satchel(key, cargo, local, pocket)\n  }\n}\n\nexport { Satchel }\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration.mjs\";\n\nexport default function _classPrivateMethodInit(obj, privateSet) {\n  _checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}\n","import { Satchel } from '@bnjmnrsh/satchel'\n\nconst API = 'https://signal-v-noise-worker.bnjmnrsh.workers.dev'\n\n/**\n * Gets Articles stored in LocalStorage using Satchel\n *\n * @param {strin} sSection - The section key to retireve articles for.\n * @param {boolean} [bForceStore=false] - Force retrival of stale values from store.\n * @returns {Article[] | false} The array of article objects, or false if none found.\n */\nfunction getStoredArticles(sSection, bForceStore = false) {\n  const storedArticles = Satchel.getSatchel(sSection, true, 'svn-store')\n  if (!storedArticles) {\n    console.warn(`storedArticles no results for \"${sSection}\"`)\n    return false\n  }\n  console.log('storedArticles section:', storedArticles?.getKey())\n  console.log('storedArticles isFresh:', storedArticles?.isFresh())\n  if (storedArticles?.isFresh() || !navigator.onLine || bForceStore) {\n    const inStorage = storedArticles?.get(\n      !navigator.onLine || bForceStore\n    )?.data\n    if (inStorage) return inStorage\n    console.log(`${sSection} not in sessionStorage ...`)\n    return false\n  }\n}\n\nasync function fetchArticles(sSection) {\n  console.log('fetching fresh articles...')\n  const articles = fetch(API + '?section=' + sSection)\n    .then(function (resp) {\n      const data = resp.json()\n      if (resp.ok && resp.status === 200) return data\n      throw resp\n    })\n    .then(function (data) {\n      if (data.top_stories.status !== 'OK') {\n        throw data\n      }\n      // Store in LocalStoarge\n      const expiry = Date.now() + 300000 //  120000 = 2min, 300000 = 5min\n      Satchel.setKey(sSection, { data, expiry }, true, 'svn-store')\n      return data\n    })\n    .catch(function (errs) {\n      console.warn(errs)\n      // This is very simplistic\n      if (errs?.top_stories?.status !== 200) {\n        console.warn(\n          `${errs?.top_stories?.status} status code, attempting to load stale ${sSection} from store...`\n        )\n        const staleArticles = getStoredArticles(sSection, true) // check for stale data\n        if (staleArticles) return staleArticles\n      }\n      throw errs\n    })\n  return articles\n}\n\n/**\n * Gets the articles, defauts to 'home' section.\n *\n * @param {string} [section='home']\n */\nexport async function getArticles(sSection = 'home') {\n  // Set UI loading state\n  document.body.classList.add('loading')\n  return new Promise((resolve, reject) => {\n    const articlesEl = document.querySelector('#articles')\n    if (articlesEl) {\n      const freshStoredArticles = getStoredArticles(sSection)\n      if (freshStoredArticles) {\n        return resolve(freshStoredArticles)\n      } else {\n        fetchArticles(sSection)\n          .then((articles) => {\n            return resolve(articles)\n          })\n          .catch((err) => {\n            console.warn(err)\n            const staleStoredArticles = getStoredArticles(sSection, true)\n            if (staleStoredArticles) {\n              return resolve(staleStoredArticles)\n            } else {\n              return reject(err)\n            }\n          })\n      }\n    }\n  })\n}\n","/**\n * Sanitize and encode all HTML in a user-submitted string\n * https://gomakethings.com/preventing-cross-site-scripting-attacks-when-using-innerhtml-in-vanilla-javascript/\n * @param  {String} str  The user-submitted data as string\n * @return {String} str  The sanitized string\n */\nconst snitiz = function (str) {\n  const temp = document.createElement('div')\n  temp.textContent = str\n  return temp.innerHTML\n}\n\n/**\n * Debounce function calls\n *\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * https://davidwalsh.name/javascript-debounce-function\n *\n * @param {function} func callback function\n * @param {number} wait milliseconds to wait\n * @param {boolean} immediate run immediate\n */\nconst debounce = function (func, wait, immediate) {\n  let timeout\n  return function () {\n    const context = this\n    const args = arguments\n    const later = () => {\n      timeout = null\n      if (!immediate) func.apply(context, args)\n    }\n    const callNow = immediate && !timeout\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n    if (callNow) func.apply(context, args)\n  }\n}\n\n/**\n * Throttle function calls\n *\n * @param {function} func callback function\n * @param {number} wait milliseconds to wait\n * @returns\n */\nfunction throttle(func, wait = 1000) {\n  let shouldWait = false\n  let waitingArgs\n  const timeoutFunc = () => {\n    if (waitingArgs == null) {\n      shouldWait = false\n    } else {\n      func(...waitingArgs)\n      waitingArgs = null\n      setTimeout(timeoutFunc, wait)\n    }\n  }\n\n  return (...args) => {\n    if (shouldWait) {\n      waitingArgs = args\n      return\n    }\n\n    func(...args)\n    shouldWait = true\n    setTimeout(timeoutFunc, wait)\n  }\n}\n\nexport { snitiz, debounce, throttle }\n","/**\n * A simple Intersection Observer handeler\n *\n * @param object options object\n * @param string id of container element, defaults to the body element\n * @param string class assigned to target elements, defaults to '.observable'\n * @returns\n */\nexport const observer = function (\n  options = {},\n  targets = '.observable',\n  targetObservedClass = 'loaded'\n) {\n  const defaults = {\n    root: document.querySelector('body'),\n    rootMargin: '0px',\n    threshold: 1.0\n  }\n  options = { ...defaults, ...options }\n\n  const targetEls = document.querySelectorAll(targets)\n\n  if (!targetEls.length) {\n    console.warn('No observerable elements named', targets)\n    return\n  }\n\n  const handelIntersection = function (targetEls) {\n    targetEls.forEach((el) => {\n      if (el.isIntersecting) {\n        el.target.classList.add(targetObservedClass)\n      }\n    })\n  }\n  const observer = new IntersectionObserver(handelIntersection, options)\n  targetEls.forEach((el) => observer.observe(el))\n}\n","import { snitiz } from './_helpers'\nimport { aSections } from './_section_array'\nimport { observer } from './_observer'\n\n/**\n * Build the articles from API data, triggered by _fetchArticles.js\n *\n * @param object oData, the incoming API data.\n */\nexport const buildArticlesUI = function (oData) {\n  const articleList = document.querySelector('#articles')\n\n  // prettier-ignore\n  articleList.innerHTML =\n            oData.top_stories.results\n                .map(function (article) {\n                    const vaidSection = aSections.indexOf(snitiz(article.section)) >= 0\n                    if (!vaidSection) {\n                        if (\n                          article.section === 'admin' ||\n                          article.section === 'espanol'\n                        )\n                          return '' // remove empty 'admin' sections, and spanish articles\n                    }\n\n                    if (!article.abstract) return '' // remove orpahaned articles\n\n                    let assembly = `<li>\n                                    <article class=\"news-item ${snitiz(article.section)}\">\n                                        <header>`\n                    // Account for multimedia not coming in as expeced.\n                    if (\n                        'multimedia' in article &&\n                        article.multimedia !== null &&\n                        article.multimedia.length >= 3\n                    ) {\n                        assembly += `<a href=\"${snitiz(article?.url)}\" title=\"${snitiz(article.title)}\">\n                          <img class=\"loading-bg\"\n                                scrset=\"\n    ${snitiz(article.multimedia[0]?.url)} ${snitiz(article?.multimedia[0]?.width)}w,\n    ${snitiz(article.multimedia[1]?.url)} ${snitiz(article?.multimedia[1]?.width)}w,\n    ${snitiz(article.multimedia[2]?.url)} ${snitiz(article?.multimedia[2]?.width)}w\"\n\n                            src=\"${snitiz(article.multimedia[1]?.url)}\"\n                            height=\"${snitiz(article.multimedia[1]?.height)}\"\n                            width=\"${snitiz(article?.multimedia[1]?.width)}\"\n                            alt=\"${snitiz(article?.multimedia[1]?.copyright)}\"\n                            loading=\"lazy\" role=\"presentation\"/></a>`\n                    }\n                    assembly += `</header>\n                                        <section class=\"news-content\">\n                                            <header>\n                                                <h3 class=\"hyphens\"><a href=\"${snitiz(article.url)\n                        }\">${article.title}</a></h3>\n                                                  <p class=\"details\">`\n                    if (vaidSection) {\n                        assembly += `<a class=\"pill ${snitiz(article.section)}\" href=\"https://www.nytimes.com/section/${snitiz(article.section)}\">`\n                    } else {\n                        if (article.section) {\n                            assembly += `<span class=\"pill ${snitiz(article.section)}\">`\n                        }\n                    }\n                    assembly += `${snitiz(article.section)} ${vaidSection ? '</a>' : '</span>'}\n                                                    ${article?.byline ? '<span class=\"byline\">' : ''}\n                                                    ${article?.byline ? snitiz(article?.byline) : ''}\n                                                    ${article?.byline ? '</span>' : ''}\n                                                </p>\n                                            </header>\n                                            <div class=\"abstract\">`\n                    if (article.abstract) {\n                        assembly += `<p class=\"hyphens\">${snitiz(article?.abstract)}\n                                        <a href=\"${snitiz(article.url)}\" title=\"${snitiz( article.title)}\" class=\"read-more\">[...more]</a>\n                                      </p>`\n                    }\n                    assembly += `</div>\n                                        </section>\n                                    </article>\n                                </li>`\n                    return assembly\n                }).join('')\n\n  observer(\n    { root: document.querySelector('#newsfeed-wrap'), threshold: 0.25 },\n    '.news-item'\n  )\n}\n","/**\n * Set the current page link to active\n *\n */\nexport const navActiveLink = function () {\n  const currentPg = window.location.hash.replace('#', '')\n  const nav = document.querySelector('nav.noise')\n\n  // iterate over each link\n  const pills = nav.querySelectorAll('.pill')\n  pills.forEach(function (pill) {\n    if (pill.classList.contains(currentPg)) {\n      console.log(`navActiveLink: setting active link: ${currentPg}`)\n      pill.classList.add('active')\n    } else {\n      pill.classList.remove('active')\n    }\n  })\n}\n","/**\n * Create markup string for error reporting messages\n *\n * @param {object} err object\n * @returns string\n */\nexport function buildErrorsUI(err) {\n  const articlesEl = document.querySelector('#articles')\n  console.warn(err)\n  const errorMarkup = `\n<div id=\"ohnos\">\n  <h3><span aria-hidden=\"true\">⥀.⥀ <br/></span>Oh Nooos!</h3>\n  <p class=\"sr-only\">There has been a critical error:</p>\n    <div>\n<pre>\n${err.stack || ''}\n${err.type || ''}\n${`${err.statusText || ''} ${err.status || ''}`}\n${\n  err.top_stories?.status === 429\n    ? `${err.top_stories.status} too many requests`\n    : err.top_stories?.status\n}\n${err.top_stories?.error || ''}\n${\n  err.top_stories?.error_message\n    ? ` Route not found: ${err.top_stories.error_message\n        .split('/')\n        .pop()\n        .replace('.json', '')}`\n    : ''\n}\n</pre>\n    </div>\n</div>`\n  articlesEl.innerHTML = errorMarkup\n}\n","import { getArticles } from './_get_articles'\nimport { buildArticlesUI } from './_build_articles'\nimport { navActiveLink } from './_nav_active_link'\nimport { buildErrorsUI } from './_build_errors'\n\n/**\n * A simple hash based router without caching\n */\nexport const simpleRouter = async function () {\n  let urlHash = window.location.hash.replace('#', '')\n  let loadedSection = document\n    .querySelector('#app')\n    .getAttribute('data-section')\n\n  urlHash = urlHash || 'home' // If there is no hash, were're home.\n\n  if (!loadedSection && !!urlHash) {\n    // first load, but to a section not the homepage\n    loadedSection = urlHash\n    if (urlHash) {\n      document.querySelector('#app').setAttribute('data-section', urlHash)\n    }\n  }\n  // scrollToTop triggers a hashchange, below prevents mutiple fireing of getArticles when this happens.\n  if (urlHash === 'null' || urlHash === 'head') {\n    window.removeEventListener('hashchange', simpleRouter)\n    window.location.hash = loadedSection\n    // delay re-enableing the listener to prevent hashchange firing mutiple times.\n    // Could use a debounce but this works fine.\n    setTimeout(() => window.addEventListener('hashchange', simpleRouter), 1)\n  } else {\n    if (urlHash) {\n      // Scroll to top\n      document.body.querySelector('#newsfeed-wrap').scrollTo(0, 0)\n      // Set active styles on nav pill\n      navActiveLink()\n      // load the articles\n      getArticles(urlHash)\n        .then(function (articles) {\n          return buildArticlesUI(articles)\n        })\n        .then(\n          // Disable UI loading state (slow down removal as it actaually feels better to have the blur then jank)\n          setTimeout(() => document.body.classList.remove('loading'), 300)\n        )\n        .catch((errs) => {\n          buildErrorsUI(errs)\n          throw new Error('Unable to build articles', { cause: errs })\n        })\n    }\n  }\n}\nwindow.addEventListener('hashchange', simpleRouter)\n","/**\n * Tools for managing Satchel pockets.\n */\n\n/**\n * Emit custom event for Satchel pocket opperations.\n *\n * @param {object} detail Event details\n * @property {string|null} detail.pocket name of the Storage pocket being cleaned\n * @property {number|null} detail.keysBefore then number of keys in the pocket before emptyPocket or tidyPocket\n * @property {number|null} detail.keysAfter then number of keys in the pocket after emptyPocket or tidyPocket\n * @property {string} detail.storageArea, the type of Storage object\n * @property {string} detail.url, the url of the document whoes key changed\n * @property {string} detail.action the name of the Satchel function emiting the event\n * @returns {CustomEvent} CustomEvent\n */\nfunction emitPocket(detail = {}) {\n  const required = {\n    action: null,\n    pocket: null,\n    remainingPocketKeys: null,\n    startingPocketKeys: null,\n    remainingKeysInStore: null,\n    storageArea: null,\n    url: window.location.href\n  }\n  detail = { ...required, ...detail }\n  const event = new CustomEvent('Satchel', {\n    bubbles: true,\n    cancelable: true,\n    detail\n  })\n  return document.dispatchEvent(event)\n}\n\n/**\n * Get the Storage type as a string 'localStorage' or 'sessionStorage'.\n *\n * @param {object} Storage object\n * @returns {string} the Storage type as a string 'localStorage' or 'SessionStorage'\n */\nfunction storageAreaString(store) {\n  return store === window.localStorage ? 'LocalStorage' : 'SessionStorage'\n}\n\n/**\n * Returns array of keys for a 'Pocket' namespace.\n *\n * @param {string} pocket namespace prefix, default 'pocket'\n * @param {boolean} local specify sessionStorage (default) or localStorage\n * @returns {array} array of Storage keys for the current pocket.\n */\nfunction getAllPocketKeys(local = false, pocket = 'pocket', stcl = 'stcl') {\n  const store = local ? window.localStorage : window.sessionStorage\n\n  const allKeys = Object.keys(store)\n    .map((key) => {\n      return key.startsWith(stcl + '.' + pocket) ? key : ''\n    })\n    .filter((e) => {\n      return e\n    })\n\n  return Array.from(allKeys)\n}\n\n/**\n *  Removes all expired items from a given 'pocket' namespace.\n *\n * @param {string} pocket namespace prefix, default 'pocket'\n * @param {boolean} local specify sessionStorage (default) or localStorage\n * @returns The number of items remaing in store that have yet to expire.\n */\nfunction tidyPocket(local = false, pocket = 'pocket', stcl = 'stcl') {\n  const store = local ? window.localStorage : window.sessionStorage\n  const pocketKeys = getAllPocketKeys(local, pocket, stcl)\n  if (!pocketKeys.length) return null\n\n  Object.keys(pocketKeys).forEach((key) => {\n    const expiry = JSON.parse(store.getItem(pocketKeys[key])).expiry\n    if (!expiry || expiry - Date.now() > 0) return null\n    store.removeItem(pocketKeys[key])\n  })\n\n  emitPocket(\n    {\n      action: 'tidyPocket',\n      pocket,\n      remainingPocketKeys: getAllPocketKeys(local, pocket, stcl).length,\n      remainingKeysInStore: store.length,\n      startingPocketKeys: pocketKeys.length,\n      storageArea: storageAreaString(store)\n    },\n    true\n  )\n  return [getAllPocketKeys(local, pocket).length, store.length]\n}\n\n/**\n * Clears all items regardless of freshness from a given 'pocket' namespace.\n *\n * @param {boolean} local specify sessionStorage (default) or localStorage\n * @param {string} pocket namespace prefix, default 'pocket'\n * @returns {array|null} The number of pocket-keys remaing in store, which if sucessful should be [0, store.length].\n */\nfunction emptyPocket(local = false, pocket = 'pocket', stcl = 'stcl') {\n  const store = local ? window.localStorage : window.sessionStorage\n  const pocketKeys = getAllPocketKeys(local, pocket, stcl)\n  if (!pocketKeys.length) return null\n\n  Object.keys(pocketKeys).forEach((key) => {\n    store.removeItem(pocketKeys[key])\n  })\n\n  const remainingPocketKeys = getAllPocketKeys(local, pocket, stcl)\n\n  emitPocket(\n    {\n      action: 'emptyPocket',\n      pocket,\n      remainingPocketKeys: remainingPocketKeys.length,\n      remainingKeysInStore: store.length,\n      startingPocketKeys: pocketKeys.length,\n      storageArea: storageAreaString(store)\n    },\n    true\n  )\n  return [remainingPocketKeys.length, store.length]\n}\n\nexport { emptyPocket, tidyPocket, getAllPocketKeys }\n","import { getAllPocketKeys } from '@bnjmnrsh/satchel/dist/bindle'\n/**\n * Build the nav pills using our section array.\n *\n * @param {array} [data=aSections]\n */\nexport const buildNav = function (rootEl, navEls) {\n  const store = getAllPocketKeys(true, 'svn-store')\n  const navItems = rootEl.querySelector('nav')\n  navItems.innerHTML =\n    '<ul>' +\n    navEls\n      .map(function (navEl) {\n        const isStored = store.includes('stcl.svn-store.' + navEl)\n        return `<li><a href=\"#${navEl}\" class=\"pill ${navEl}\" data-section=\"${navEl}\" data-stored=\"${isStored}\">${navEl}</a></li>`\n      })\n      .join('') +\n    '</ul>'\n}\n\n// Add event listener for Satchel and refresh data-storage attrs on links when a store is added for that section.\n// Goal here is to be able to highlight the ones that a user can navigate to when they are off line.\n\nwindow.addEventListener('Satchel', refreshLinkData)\n\n/**\n * Responds to Satchel events and updates any associated nav links when a store is updated.\n * @param {object} e\n * @returns undefined\n */\nfunction refreshLinkData(e) {\n  if (e.type !== 'Satchel') return\n  const store = e.detail.key.split('.')[1]\n  if (store !== 'svn-store') return\n  const section = e.detail.key.split('.')[2]\n  const pills = document.querySelectorAll(`[data-section=\"${section}\"]`)\n  pills.forEach((pill) => {\n    pill.setAttribute('data-stored', true)\n  })\n}\n","/**\n * A utility for mananging toast like UI messages.\n */\nexport const Toast = (function (options = {}) {\n  const settings = {\n    selector: 'body',\n    className: 'toast'\n  }\n\n  const Constructor = function (options) {\n    let ID = 0\n    const publicAPIs = {}\n    publicAPIs.settings = { ...settings, ...options }\n    publicAPIs.className = publicAPIs.settings.className\n    publicAPIs.target = document.querySelector(publicAPIs.settings.selector)\n\n    if (!publicAPIs.target) {\n      throw new Error(\n        `Toast: the target element \"${publicAPIs.settings.selector}\" could not be found.`\n      )\n    }\n\n    // Private Methods\n    /**\n     * Simple unique ID generator for toasts.\n     * ID's are unique for the current session only.\n     *\n     * @returns string ID, unique to the current session\n     */\n    const toastID = function () {\n      return `${publicAPIs.settings.selector}-${ID++}`.toString()\n    }\n\n    /**\n     * Create new toast messages\n     *\n     * @param {string} message\n     * @param {int} autohide default 0 or autohide after specified milliseconds\n     * @param {boolean} dismiss outputs a dismiss button\n     * @param {boolean} prepend prepend instead of append the toast\n     * @param {array} classes an array of suplimental classes\n     * @param {string} id pass in your own ID insead of using the internal methods\n     * @returns {string|boolean:false} ID for the toast message just created\n     */\n    publicAPIs.create = function (\n      message,\n      autohide = 0,\n      dismiss = false,\n      prepend = true,\n      classes = [],\n      id = false\n    ) {\n      if (!message) {\n        throw new Error('Toast.js requires a message string!')\n      }\n      id = id || toastID()\n      const toast = document.createElement('div')\n\n      toast.setAttribute('role', 'alert')\n      toast.setAttribute('data-toast-id', id)\n      toast.classList.add(this.className, ...classes)\n      if (autohide) {\n        setTimeout(() => toast.remove(), autohide)\n      }\n      if (dismiss) {\n        toast.innerHTML = `${message} <button class=\"toast-close\" arial-lable=\"close\">&#x2715</button>`\n\n        toast.addEventListener('click', function (e) {\n          if (!e.target.matches('.toast-close')) return\n          toast.remove()\n          toast.removeEventListener('click', close)\n        })\n      } else {\n        toast.innerHTML = `${message}`\n      }\n      prepend\n        ? publicAPIs.target.prepend(toast)\n        : publicAPIs.target.append(toast)\n\n      // append message 1ms later so it will be announced by screen readers, thanks Heydon.\n      setTimeout(() => toast.innerHTML, 1)\n      return id\n    }\n\n    /**\n     * Remove toasts from DOM\n     *\n     * @param {string} id of the toast to be reomved from the DOM\n     * @returns\n     */\n    publicAPIs.destroy = function (id) {\n      if (!id) return false\n      const target = document.querySelector(`[data-toast-id=\"${id}\"]`)\n      if (target) {\n        target.remove()\n        return publicAPIs\n      }\n      return false\n    }\n    return publicAPIs\n  }\n  return Constructor\n})()\n","import { simpleRouter } from './_simple_router'\nimport { Toast } from '@bnjmnrsh/toast'\n\nconst disableEnableLinks = function (navEls, disable = true) {\n  if (!navEls) return\n  navEls.forEach(function (el) {\n    if (disable) {\n      if (el.dataset.stored === 'false') {\n        el.setAttribute('data-hash', el.href?.split('#')[1])\n        el.removeAttribute('href')\n        el.setAttribute('aria-disabled', true)\n      }\n    } else {\n      if (el.dataset.stored === 'false') {\n        console.log('disableEnableLinks', el.dataset)\n        el.setAttribute('href', '#' + el.dataset.hash)\n        el.removeAttribute('aria-disabled')\n        el.removeAttribute('data-hash')\n      }\n    }\n  })\n}\n\n/**\n * Detect network availability\n */\nexport const networkAvaliabilty = function () {\n  const status = navigator.onLine ? 'online' : 'offline'\n  document.body.setAttribute('data-network', status)\n\n  const networkNotice = new Toast()\n  let curentNotice = ''\n  let timeStamp = Date.now().toString()\n\n  window.addEventListener('offline', (e) => {\n    const nav = document.querySelectorAll('.noise .pill')\n    console.warn('Network unavailable', nav)\n    timeStamp = Date.now()\n    disableEnableLinks(nav)\n    document.body.setAttribute('data-network', 'offline')\n    curentNotice = networkNotice.create(\n      'Sorry, you are currently off line',\n      0,\n      false,\n      true,\n      ['offline-notice']\n    )\n  })\n\n  window.addEventListener('online', () => {\n    const nav = document.querySelectorAll('.noise .pill')\n    console.warn('Network available', nav)\n    document.body.setAttribute('data-network', 'online')\n    disableEnableLinks(nav, false)\n    if (Date.now() - timeStamp > 30000) simpleRouter()\n    networkNotice.destroy(curentNotice)\n  })\n}\n","import { scrollToTop } from './_scroll_to_top.js'\nimport { aSections } from './_section_array.js'\nimport { simpleRouter } from './_simple_router.js'\nimport { buildNav } from './_build_nav.js'\nimport { networkAvaliabilty } from './_network.js'\nconst app = document.querySelector('#app')\n\nnetworkAvaliabilty('', true)\nbuildNav(app, aSections)\nsimpleRouter() // kicks off _fetchArticles.js\nscrollToTop('#newsfeed-wrap')\n"],"names":["$ceea213f84ad8464$export$b970e447caab2d4f","$63d42ad21a770d22$export$2e2bcd8739ae039","receiver","privateMap","action","has","TypeError","get","$c855d61077fe87ac$export$2e2bcd8739ae039","descriptor","call","value","$0fbd0ad5af1b36a7$export$2e2bcd8739ae039","$802ff1c23273ded8$export$2e2bcd8739ae039","obj","privateCollection","$bf2f395e59669c8c$export$2e2bcd8739ae039","set","$acf55db80bb7b913$export$2e2bcd8739ae039","writable","$23ca9c6be385c539$export$2e2bcd8739ae039","$11f86b0429a91e7d$export$2e2bcd8739ae039","privateSet","fn","$b61de79112a364ed$export$2e2bcd8739ae039","classConstructor","$ba1289c69a6ddd48$export$2e2bcd8739ae039","method","key","pocketKey","store","settings","isObject","Satchel","stcl","prefix","Error","this","_stcl","age","JSON","parse","getItem","Date","now","_creation","creation","expiry","fresh","isFresh","bin","item","removeItem","emit","oldValue","storageArea","storageAreaString","getStale","data","exsisting","stringify","e","storedEntry","temp","setItem","newValue","getKey","static","local","pocket","window","localStorage","sessionStorage","length","cargo","constructor","add","detail","url","location","href","event","CustomEvent","bubbles","cancelable","document","dispatchEvent","doesit","Object","defineProperty","enumerable","configurable","$aa3412b194b30a58$var$getStoredArticles","sSection","bForceStore","storedArticles","$1c6a17c174ed4fd4$export$606ac585bcfc66d2","getSatchel","console","warn","log","navigator","onLine","inStorage","async","$aa3412b194b30a58$export$59baee6c0c5ecafe","body","classList","Promise","resolve","reject","querySelector","freshStoredArticles","fetch","$aa3412b194b30a58$var$API","then","resp","json","ok","status","top_stories","setKey","catch","errs","staleArticles","$aa3412b194b30a58$var$fetchArticles","articles","err","staleStoredArticles","$b951c4f1065851f5$export$4c430f6036207e33","str","createElement","textContent","innerHTML","$fedebe61b8efbdde$export$b6ae1bc530f4c149","options","targets","targetObservedClass","root","rootMargin","threshold","targetEls","querySelectorAll","observer","IntersectionObserver","forEach","el","isIntersecting","target","observe","$488e85f7c238df00$export$7bd01a75ce1020db","oData","results","map","article","vaidSection","indexOf","section","abstract","assembly","multimedia","title","width","height","copyright","byline","join","$c665f982892d2625$export$2e2a5ed6cc972248","currentPg","hash","replace","pill","contains","remove","$3d49f39153fcc9b1$export$424274d5ba0b27b4","articlesEl","errorMarkup","stack","type","statusText","error","error_message","split","pop","$956b63627a330159$export$b4815c10c0abc9e0","urlHash","loadedSection","getAttribute","setAttribute","removeEventListener","setTimeout","addEventListener","scrollTo","cause","$ebf941a6554422f7$export$ccb6f83156242dd7","allKeys","keys","startsWith","filter","Array","from","Toast","selector","className","ID","publicAPIs","create","message","autohide","dismiss","prepend","classes","id","toString","toast","matches","close","append","destroy","$2906dd65e0b798b2$var$disableEnableLinks","navEls","disable","dataset","stored","removeAttribute","$f7fd1b9ad3a30dd6$var$app","networkNotice","$1c3254a088b62b7c$export$8d8dc7d5f743331b","curentNotice","timeStamp","nav","rootEl","navEl","includes","targetEl","triggerPoint","scrollingEl","sttEl","elTrigger","scrollY","scrollTop","scrollingElement"],"version":3,"file":"index.ff808894.js.map"}